import{r as o,j as e,L as j,d as Q,c as F,H as Y}from"./app-CS9LyjFR.js";import{c as y,s as h}from"./index-BWEMkwyW.js";import{a as R,S as Z,L as ee,M as te,T as se,B as w,X as O,b as E}from"./Card-BRE-mfCn.js";import{U as C}from"./user-BqjTzHlD.js";import{C as ae}from"./clock-CJ7KxOGx.js";/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ne=y("chevron-right",re);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],oe=y("credit-card",ie);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],le=y("layout-dashboard",ce);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],xe=y("maximize-2",de);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],U=y("message-square",he);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],ue=y("minimize-2",me);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ye=y("send",ge);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],pe=y("wallet",fe),je=({user:f=null,userBalance:s=null,notificationCount:l=0,sidebarOpen:n,setSidebarOpen:m})=>{const[a,d]=o.useState(!1),i=s?s.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}):"$0.00",b=(g=>g?g>=1e6?`$${(g/1e6).toFixed(1)}M`:g>=1e3?`$${(g/1e3).toFixed(1)}K`:g.toLocaleString("en-US",{style:"currency",currency:"USD"}):"$0.00")(s),p=()=>{Q.post(h("logout"))};return e.jsx("header",{className:"sticky top-0 z-50 border-b border-gray-800 bg-gray-900/95 backdrop-blur-sm",children:e.jsx("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs(j,{href:"/",className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-gradient-to-r from-cyan-400 to-blue-500",children:e.jsx("span",{className:"text-lg font-bold text-white",children:"AI"})}),e.jsx("span",{className:"text-xl font-bold text-white",children:"CryptoAI"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(j,{href:h("assets.index"),className:"group items-center hidden px-4 py-2 space-x-2 transition-all duration-200 rounded-lg sm:flex bg-gray-800/50 hover:bg-gray-800/70 hover:scale-105",title:s!==null?`Click to view portfolio details
Total Balance: ${i}`:"Loading balance...",children:[e.jsx(pe,{className:"w-5 h-5 text-cyan-400 flex-shrink-0 group-hover:text-cyan-300 transition-colors"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Balance"}),e.jsx("p",{className:`text-sm font-semibold transition-colors ${s===null?"text-gray-400":s>0?"text-white group-hover:text-cyan-100":"text-gray-300"}`,children:s===null?e.jsx("span",{className:"animate-pulse",children:"Loading..."}):i})]})]}),e.jsx(j,{href:h("assets.index"),className:"flex items-center px-3 py-2 transition-colors rounded-lg sm:hidden bg-gray-800/50 hover:bg-gray-800/70",children:e.jsx("span",{className:`text-sm font-semibold ${s===null?"text-gray-400":s>0?"text-white":"text-gray-300"}`,children:s===null?e.jsx("span",{className:"animate-pulse",children:"Loading..."}):s&&s>1e3?b:i})}),e.jsxs(j,{href:h("notifications.index"),className:"relative p-2 text-gray-300 transition-colors rounded-lg hover:text-cyan-400 hover:bg-gray-800/50",children:[e.jsx(R,{className:"w-5 h-5"}),l>0&&e.jsx("span",{className:"absolute flex items-center justify-center w-5 h-5 text-xs text-white bg-red-500 rounded-full -top-1 -right-1",children:l>9?"9+":l})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>d(!a),className:"flex items-center p-2 space-x-2 text-gray-300 transition-colors rounded-lg hover:text-cyan-400 hover:bg-gray-800/50",children:[e.jsx(C,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden text-sm md:block",children:f?.name||"User"})]}),a&&e.jsxs("div",{className:"absolute right-0 z-50 w-48 py-1 mt-2 bg-gray-800 border border-gray-700 rounded-md shadow-lg",children:[e.jsxs(j,{href:h("profile.edit"),className:"flex items-center px-4 py-2 text-sm text-gray-300 transition-colors hover:bg-gray-700 hover:text-white",onClick:()=>d(!1),children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Profile Settings"]}),e.jsx("hr",{className:"my-1 border-gray-700"}),e.jsxs("button",{onClick:p,className:"flex items-center w-full px-4 py-2 text-sm text-gray-300 transition-colors hover:bg-gray-700 hover:text-white",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]}),e.jsx("button",{className:"p-2 mr-2 text-gray-300 rounded-md lg:hidden hover:text-cyan-400 hover:bg-gray-800/50 focus:outline-none",onClick:()=>m&&m(!n),"aria-label":"Open sidebar",children:e.jsx(te,{className:"w-6 h-6"})})]})]})})})},be=({sidebarOpen:f,setSidebarOpen:s})=>{const{url:l}=F(),n=[{name:"Dashboard",href:h("dashboard"),icon:le,description:"Overview & Analytics"},{name:"Assets",href:h("assets.index"),icon:se,description:"Portfolio Management"},{name:"Payments",href:h("payments.index"),icon:oe,description:"Deposits & Withdrawals"},{name:"Notifications",href:h("notifications.index"),icon:R,description:"Alerts & Updates"},{name:"Profile",href:h("profile.show"),icon:C,description:"Account Settings"}],m=a=>l===a||l.startsWith(a);return e.jsx("div",{className:`sticky left-0 top-16 h-[calc(100vh-4rem)] w-64 bg-gray-900/95 backdrop-blur-sm border-r border-gray-800 z-40 transition-all duration-300 ${f?"block":"hidden"} lg:static lg:block`,style:{zIndex:40},children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h2",{className:"text-xs font-semibold tracking-wider text-gray-400 uppercase",children:"Navigation"})}),e.jsx("nav",{className:"space-y-2",children:n.map(a=>{const d=a.icon,i=m(a.href);return e.jsxs(j,{href:a.href,className:`group flex items-center justify-between px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${i?"bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg":"text-gray-300 hover:bg-gray-800/50 hover:text-white"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:`w-5 h-5 mr-3 ${i?"text-white":"text-gray-400 group-hover:text-cyan-400"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsx("p",{className:`text-xs ${i?"text-cyan-100":"text-gray-500 group-hover:text-gray-400"}`,children:a.description})]})]}),e.jsx(ne,{className:`w-4 h-4 transition-transform ${i?"text-white":"text-gray-500 group-hover:text-gray-300 group-hover:translate-x-1"}`})]},a.name)})}),e.jsx("div",{className:"pt-6 mt-8 border-t border-gray-800",children:e.jsx("div",{className:"px-4 py-3 rounded-lg bg-gray-800/30",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gradient-to-r from-green-500 to-emerald-600",children:e.jsx("span",{className:"text-sm font-bold text-white",children:"âœ“"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-white",children:"AI Trading"}),e.jsx("p",{className:"text-xs text-green-400",children:"Active"})]})]})})})]})})},Ne=({auth:f,adminUser:s=null,initialMessages:l=[]})=>{const[n,m]=o.useState(!1),[a,d]=o.useState(!1),[i,S]=o.useState(""),[b,p]=o.useState(l||[]),[g,M]=o.useState(!1),[q,T]=o.useState(!1),[k,_]=o.useState(!1),[$,A]=o.useState(0),z=o.useRef(null),H=o.useRef(null),N=o.useRef(null),x=f?.user;o.useEffect(()=>{if(window.Echo&&x)try{window.Echo.private(`chat.${x.id}`).listen(".message.sent",t=>{p(r=>r.some(c=>c.id===t.chat.id)?r:[...r,t.chat]),n||A(r=>r+1),W()}).listen("UserTyping",t=>{t.user.id!==x.id&&(M(!0),N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{M(!1)},3e3))}),_(!0)}catch(t){console.error("Echo connection failed:",t),_(!1)}return()=>{window.Echo&&x&&window.Echo.leaveChannel(`chat.${x.id}`),N.current&&clearTimeout(N.current)}},[x,n]),o.useEffect(()=>{P()},[b]),o.useEffect(()=>{n&&A(0)},[n]);const P=()=>{z.current?.scrollIntoView({behavior:"smooth"})},W=()=>{try{const t=new Audio("/sounds/notification.mp3");t.volume=.3,t.play().catch(()=>{})}catch{}},V=async t=>{if(t.preventDefault(),!i.trim()||q)return;T(!0);const r={id:Date.now(),content:i.trim(),user:x,created_at:new Date().toISOString(),sending:!0};p(c=>[...c,r]),S("");try{const c=route("chat.send"),u=document.querySelector('meta[name="csrf-token"]'),v=u?u.getAttribute("content"):"",L=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":v,"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},body:JSON.stringify({message:r.content})});if(!L.ok)throw await L.json().catch(()=>({}));p(I=>I.filter(G=>G.id!==r.id))}catch(c){p(u=>u.filter(v=>v.id!==r.id)),console.error("Failed to send message:",c)}finally{T(!1)}},X=()=>{window.Echo&&x&&window.Echo.private(`chat.${x.id}`).whisper("typing",{user:x})},K=()=>{n||J(),m(!n),d(!1)},J=async()=>{try{const r=await(await fetch(route("chat.history"))).json();p(r.messages||[])}catch(t){console.error("Failed to load chat history:",t)}},B=t=>{const r=new Date(t),c=new Date;return r.toDateString()===c.toDateString()?r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):r.toLocaleDateString([],{month:"short",day:"numeric"})},D=t=>t?.role==="admin"||t?.is_admin;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsxs(w,{onClick:K,className:`relative w-14 h-14 rounded-full shadow-lg transition-all duration-300 ${n?"bg-red-500 hover:bg-red-600":"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700"}`,children:[n?e.jsx(O,{className:"w-6 h-6 text-white"}):e.jsx(U,{className:"w-6 h-6 text-white"}),$>0&&!n&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-white",children:$>99?"99+":$})}),e.jsx("div",{className:`absolute bottom-0 right-0 w-4 h-4 rounded-full border-2 border-white ${k?"bg-green-500":"bg-gray-500"}`})]})}),n&&e.jsxs("div",{className:`fixed flex flex-col bottom-24 right-6 w-96 bg-gray-800 border border-gray-700 rounded-lg shadow-2xl z-50 transition-all duration-300 ${a?"h-14":"h-2/3"}`,children:[e.jsxs("div",{className:"flex-none flex items-center justify-between p-4 border-b border-gray-700 bg-gradient-to-r from-cyan-900/50 to-blue-900/50 rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[s?e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center",children:e.jsx(E,{className:"w-4 h-4 text-white"})}):e.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center",children:e.jsx(C,{className:"w-4 h-4 text-gray-300"})}),e.jsx("div",{className:`absolute bottom-0 right-0 w-3 h-3 rounded-full border border-gray-800 ${k?"bg-green-500":"bg-gray-500"}`})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:s?`${s.name} (Admin)`:"Support Team"}),e.jsx("p",{className:"text-xs text-gray-400",children:k?"Online":"Connecting..."})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>d(!a),className:"text-gray-400 hover:text-white",children:a?e.jsx(xe,{className:"w-4 h-4"}):e.jsx(ue,{className:"w-4 h-4"})}),e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>m(!1),className:"text-gray-400 hover:text-white",children:e.jsx(O,{className:"w-4 h-4"})})]})]}),!a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 p-4 h-64 overflow-y-auto bg-gray-900/30",children:b.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(U,{className:"w-12 h-12 text-gray-500 mb-3"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Start a conversation"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"We're here to help!"})]}):e.jsxs("div",{className:"space-y-4",children:[b.map((t,r)=>{const c=t.user??(t.user_id?{id:t.user_id,name:t.user.name??t.userName??"User"}:{id:null,name:t.username??"System"}),u=c.id===x?.id,v=t.content??t.message??t.body??"";return e.jsx("div",{className:`flex ${u?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs px-3 py-2 rounded-lg ${u?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"bg-gray-700 text-gray-100"} ${t.sending?"opacity-60":""}`,children:[!u&&e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-300",children:D(c)?`${c.name} (Admin)`:c.name}),D(c)&&e.jsx(E,{className:"w-3 h-3 text-purple-400"})]}),e.jsx("p",{className:"text-sm",children:v}),e.jsxs("div",{className:"flex items-center justify-end mt-1 space-x-1",children:[e.jsx(ae,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400",children:B(t.created_at)}),t.sending&&e.jsx("span",{className:"text-xs text-gray-400",children:"Sending..."})]})]})},t.id||r)}),g&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-700 px-3 py-2 rounded-lg",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:z})]})}),e.jsx("div",{className:"flex-none p-4 border-t border-gray-700",children:e.jsxs("form",{onSubmit:V,className:"flex space-x-2",children:[e.jsx("input",{ref:H,type:"text",value:i,onChange:t=>{S(t.target.value),X()},placeholder:"Type your message...",className:"flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500"}),e.jsx(w,{type:"submit",size:"sm",className:"px-3 py-2",children:e.jsx(ye,{className:"w-4 h-4"})})]})})]})]})]})};function Ce({children:f,title:s="CryptoAI Dashboard"}){const{auth:l}=F().props,n=l?.user,m=n?.account?.balance||0,a=l?.notificationCount||0,[d,i]=o.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Y,{title:s}),e.jsxs("div",{className:"flex flex-col h-screen bg-gray-900",children:[e.jsx(je,{user:n,userBalance:m,notificationCount:a,sidebarOpen:d,setSidebarOpen:i}),e.jsxs("div",{className:"relative flex flex-1 overflow-hidden",children:[e.jsx(be,{sidebarOpen:d,setSidebarOpen:i}),d&&e.jsx("div",{className:"fixed inset-0 z-30 bg-gray-900/80 lg:hidden",onClick:()=>i(!1)}),e.jsxs("main",{className:"flex-1 pt-0 overflow-hidden",children:[e.jsx("div",{className:"h-full overflow-y-auto",children:f}),e.jsx(Ne,{auth:l})]})]})]})]})}export{Ce as C,U as M,ye as S,pe as W};
