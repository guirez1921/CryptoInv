import{b as R,r as c,j as e,a as H}from"./app-CBXTJLwE.js";import{c as J,s as g}from"./index-CC8HirbQ.js";import{B as o,C as l,T as K,S as q}from"./Card-Bbxj3SQG.js";import{C as X,a as Y,V as G}from"./ViewMnemonicModal-B5O_ft56.js";import{A as Q}from"./arrow-left-BGrOAj-C.js";import{M as Z}from"./mail-ByDrfEE1.js";import{C as _}from"./circle-check-big-DB-z-1s3.js";import{L as ee}from"./lock-DTHfCAyj.js";import{P as se}from"./plus-BZQkFXXs.js";import{K as te}from"./key-BfncUK9p.js";import{M as y,W as k,S as ae}from"./wallet-Dfass5ZD.js";import{D as ie}from"./dollar-sign-CttjnbYB.js";import{A as T}from"./activity-DjxpKj1B.js";import{C as ne}from"./copy-CqlpKxKD.js";import{U as ce}from"./user-C9dLV1_y.js";import{C as re}from"./clock-BXht2el-.js";import"./triangle-alert-B4QcLzRy.js";/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],de=J("calendar",le),Te=({user:t,transactions:oe,wallet:r})=>{const{auth:D}=R().props,[n,x]=c.useState("overview"),[A,N]=c.useState(""),[M,L]=c.useState({}),[$,u]=c.useState(!1),[p,h]=c.useState([]),[j,b]=c.useState(""),[f,v]=c.useState(!1),[E,w]=c.useState(!1),C=c.useRef(null),S=D?.user,F=s=>{navigator.clipboard.writeText(s),N(s),setTimeout(()=>N(""),2e3)},I=s=>{L(a=>({...a,[s]:!a[s]}))},z=s=>({ethereum:"âŸ ",bitcoin:"â‚¿",solana:"â—Ž",tron:"T",polygon:"â¬£",bsc:"Éƒ"})[s.toLowerCase()]||"ðŸ”—",B=s=>({completed:"bg-green-500/20 text-green-400",pending:"bg-yellow-500/20 text-yellow-400",failed:"bg-red-500/20 text-red-400"})[s]||"bg-gray-500/20 text-gray-400";c.useEffect(()=>{n==="chat"&&p.length===0&&V()},[n]),c.useEffect(()=>{U()},[p]),c.useEffect(()=>{if(n==="chat"&&window.Echo&&t.id)return window.Echo.private(`chat.${t.id}`).listen(".message.sent",a=>{h(i=>i.some(d=>d.id===a.chat.id)?i:[...i,a.chat])}),()=>{window.Echo&&window.Echo.leaveChannel(`chat.${t.id}`)}},[n,t.id]);const U=()=>{C.current?.scrollIntoView({behavior:"smooth"})},V=async()=>{w(!0);try{const a=await(await fetch(g("admin.chat.history",t.id))).json();h(a.messages||[])}catch(s){console.error("Failed to load chat:",s)}finally{w(!1)}},W=async s=>{if(s.preventDefault(),!j.trim()||f)return;v(!0);const a={id:Date.now(),message:j.trim(),is_from_admin:!0,created_at:new Date().toISOString(),sending:!0,admin:{user:S}};h(i=>[...i,a]),b("");try{const i=document.querySelector('meta[name="csrf-token"]')?.content;if(!(await fetch(g("admin.chat.send",t.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":i,Accept:"application/json"},body:JSON.stringify({message:a.message})})).ok)throw new Error("Failed");h(m=>m.filter(P=>P.id!==a.id))}catch(i){console.error("Error:",i),h(d=>d.filter(m=>m.id!==a.id))}finally{v(!1)}},O=s=>{const a=new Date(s),i=new Date;return a.toDateString()===i.toDateString()?a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):a.toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e.jsxs(X,{title:`${t.name} - User Details`,children:[e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>H.get(g("admin.dashboard")),className:"mb-6",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:t.name?.charAt(0)?.toUpperCase()||"U"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-gray-400",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Z,{className:"w-4 h-4 mr-1"}),t.email]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),"Joined ",t.created_at]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[t.is_active?e.jsxs("span",{className:"flex items-center px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),"Active"]}):e.jsxs("span",{className:"flex items-center px-3 py-1 bg-gray-500/20 text-gray-400 rounded-full text-sm",children:[e.jsx(Y,{className:"w-4  h-4 mr-1"}),"Inactive"]}),t.email_verified_at&&e.jsx("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm",children:"Verified"}),r?.is_locked&&e.jsxs("span",{className:"flex items-center px-3 py-1 bg-red-500/20 text-red-400 rounded-full text-sm",children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Wallet Locked"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(o,{size:"sm",variant:"outline",children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),"Deposit"]}),e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>u(!0),children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),"View Mnemonic"]}),e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>x("chat"),children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),"Message"]})]})]})}),t.account&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total Balance"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",(t.account.total_balance||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx(ie,{className:"w-10 h-10 text-cyan-400"})]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Available"}),e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["$",(t.account.available_balance||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx(k,{className:"w-10 h-10 text-green-400"})]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Invested"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-400",children:["$",t.account.invested_balance?.toLocaleString()||"0.00"]})]}),e.jsx(K,{className:"w-10 h-10 text-purple-400"})]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Profit/Loss"}),e.jsxs("p",{className:`text-2xl font-bold ${(t.account.profit_loss||0)>=0?"text-green-400":"text-red-400"}`,children:["$",t.account.profit_loss?.toLocaleString()||"0.00"]})]}),e.jsx(T,{className:"w-10 h-10 text-orange-400"})]})})]}),e.jsxs("div",{className:"flex space-x-1 mb-8 bg-gray-800 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>x("overview"),className:`flex-1 px-4 py-3 rounded-md text-sm font-medium transition-colors ${n==="overview"?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:"Overview"}),e.jsxs("button",{onClick:()=>x("wallet"),className:`flex-1 px-4 py-3 rounded-md text-sm font-medium transition-colors ${n==="wallet"?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[e.jsx(k,{className:"w-4 h-4 inline mr-2"}),"Wallet & Addresses"]}),e.jsxs("button",{onClick:()=>x("transactions"),className:`flex-1 px-4 py-3 rounded-md text-sm font-medium transition-colors ${n==="transactions"?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[e.jsx(T,{className:"w-4 h-4 inline mr-2"}),"Transactions"]}),e.jsxs("button",{onClick:()=>x("chat"),className:`flex-1 px-4 py-3 rounded-md text-sm font-medium transition-colors ${n==="chat"?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[e.jsx(y,{className:"w-4 h-4 inline mr-2"}),"Chat"]})]}),n==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"User ID"}),e.jsx("p",{className:"text-white font-medium",children:t.id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Email Verified"}),e.jsx("p",{className:"text-white font-medium",children:t.email_verified_at||"Not verified"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Status"}),e.jsx("p",{className:"text-white font-medium",children:t.is_active?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Joined Date"}),e.jsx("p",{className:"text-white font-medium",children:t.created_at})]})]})]}),e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Recent Transactions"}),e.jsx(o,{size:"sm",variant:"outline",onClick:()=>x("transactions"),children:"View All"})]}),t.recent_transactions&&t.recent_transactions.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left py-3 text-gray-400 font-medium",children:"Type"}),e.jsx("th",{className:"text-left py-3 text-gray-400 font-medium",children:"Amount"}),e.jsx("th",{className:"text-left py-3 text-gray-400 font-medium",children:"Chain"}),e.jsx("th",{className:"text-left py-3 text-gray-400 font-medium",children:"Status"}),e.jsx("th",{className:"text-left py-3 text-gray-400 font-medium",children:"Date"})]})}),e.jsx("tbody",{children:t.recent_transactions.map(s=>e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"py-3 text-white capitalize",children:s.type}),e.jsxs("td",{className:"py-3 text-white font-semibold",children:["$",s.amount]}),e.jsx("td",{className:"py-3 text-gray-300 uppercase",children:s.chain}),e.jsx("td",{className:"py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${B(s.status)}`,children:s.status})}),e.jsx("td",{className:"py-3 text-gray-400 text-sm",children:s.created_at})]},s.id))})]})}):e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No transactions yet"})]})]}),n==="wallet"&&e.jsxs(l,{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"HD Wallet & Addresses"}),r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-800/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Wallet Status"}),e.jsx("p",{className:"text-white font-medium capitalize",children:r.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total Addresses"}),e.jsx("p",{className:"text-white font-medium",children:r.address_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Wallet Type"}),e.jsx("p",{className:"text-white font-medium capitalize",children:r.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Created"}),e.jsx("p",{className:"text-white font-medium",children:r.created_at})]})]}),r.grouped_addresses&&r.grouped_addresses.length>0?e.jsx("div",{className:"space-y-4",children:r.grouped_addresses.map(s=>e.jsxs("div",{className:"border border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800/50 cursor-pointer hover:bg-gray-800/70",onClick:()=>I(s.chain),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:z(s.chain)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white capitalize",children:s.chain}),e.jsxs("p",{className:"text-sm text-gray-400",children:[s.addresses.length," address(es)"]})]})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Balance: ",parseFloat(s.total_balance).toFixed(8)]})]}),M[s.chain]&&e.jsx("div",{className:"p-4 bg-gray-900/50 space-y-3",children:s.addresses.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("code",{className:"text-cyan-400 text-sm",children:a.address}),a.asset&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-purple-500/20 text-purple-300 text-xs rounded",children:a.asset})]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Balance: ",parseFloat(a.balance).toFixed(8)," | Created: ",a.created_at]})]}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>F(a.address),className:"ml-4",children:A===a.address?e.jsx(_,{className:"w-4 h-4"}):e.jsx(ne,{className:"w-4 h-4"})})]},a.id))})]},s.chain))}):e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No addresses found"})]}):e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No HD wallet found for this user"})]}),n==="transactions"&&e.jsxs(l,{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Transaction History"}),e.jsx("p",{className:"text-gray-400 text-center py-8",children:"Transaction history with advanced filtering coming soon..."})]}),n==="chat"&&e.jsxs(l,{children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-6",children:["Chat with ",t.name]}),e.jsxs("div",{className:"flex flex-col h-[600px]",children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-900/30 rounded-lg mb-4",children:E?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-400",children:"Loading chat history..."})}):p.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(y,{className:"w-12 h-12 text-gray-500 mb-3"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"No messages yet"}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Start a conversation with ",t.name]})]}):e.jsxs("div",{className:"space-y-4",children:[p.map((s,a)=>{const i=s.is_from_admin,d=s.message||s.content||"",m=i?s.admin?.user||s.admin||S:s.user||{name:t.name};return e.jsx("div",{className:`flex ${i?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-md px-4 py-2 rounded-lg ${i?"bg-gradient-to-r from-purple-500/80 to-pink-600/80 text-white":"bg-gray-700 text-gray-100"} ${s.sending?"opacity-60":""}`,children:[!i&&e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(ce,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-medium text-gray-300",children:m?.name||t.name})]}),i&&e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(q,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-medium",children:m?.name||"You"})]}),e.jsx("p",{className:"text-sm",children:d}),e.jsxs("div",{className:"flex items-center justify-end mt-1 space-x-1",children:[e.jsx(re,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400",children:O(s.created_at)}),s.sending&&e.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"Sending..."})]})]})},s.id||a)}),e.jsx("div",{ref:C})]})}),e.jsxs("form",{onSubmit:W,className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:j,onChange:s=>b(s.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500",disabled:f}),e.jsxs(o,{type:"submit",disabled:!j.trim()||f,className:"px-6 py-3",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),f?"Sending...":"Send"]})]})]})]})]})}),$&&e.jsx(G,{user:t,onClose:()=>u(!1)})]})};export{Te as default};
