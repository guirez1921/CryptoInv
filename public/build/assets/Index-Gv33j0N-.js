import{r as m,j as e,L as N,d as R}from"./app-kgbDwQe7.js";import{C as D,W as E}from"./CryptoAIAuthLayout-CC3b6Bld.js";import{C as l,T as p,B as r,b as B,X as L}from"./Card-CBpIFVHD.js";import{c as U,s as o}from"./index-C-cCkkhB.js";import{A as b,a as w}from"./arrow-up-right-CAhnom7f.js";import{C as G}from"./calculator-U8aqkiWf.js";import{C as z}from"./chart-column-CPJOu8Wp.js";import{T as M}from"./trending-down-BIuolKyA.js";import{E as T}from"./eye-C6M5ZpQg.js";import"./user-DRV0bhNu.js";import"./clock-DYI19X7Q.js";/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],O=U("activity",V),ae=({portfolioData:k,notifications:g=[],cryptoMarketData:$,recentTransactions:j=[],auth:F})=>{const[S,n]=m.useState(!1),[i,C]=m.useState(""),[d,u]=m.useState(!1),[P,f]=m.useState(null);m.useEffect(()=>{let s=!0;return(async()=>{try{const a=await fetch(o("settings.getMinWithdrawal"));if(!a.ok)throw new Error(`Failed to fetch min withdrawal: ${a.status}`);const h=await a.json();console.log(h);const _=h.min_withdrawal??h.minWithdrawal??h.min??0;if(!s)return;f(_),Math.round(_)===0&&(n(!0),console.log("Minimum withdrawal is 0, showing modal."))}catch(a){if(console.error("Error fetching minimum withdrawal:",a),!s)return;f(0),n(!0)}})(),()=>{s=!1}},[]);const x=k||{total_balance:0,available_balance:0,total_balance_change:0},t=$||{globalMetrics:{total_market_cap:0,market_cap_change_24h:0},fearGreedIndex:{value:50,classification:"Neutral"},averageRSI:50,cryptocurrencies:[]},I=[{value:5e4,label:"$50,000"},{value:75e3,label:"$75,000"},{value:1e5,label:"$100,000"},{value:15e4,label:"$150,000"},{value:25e4,label:"$250,000"},{value:5e5,label:"$500,000"}],W=async()=>{if(console.log("Selected minimum withdrawal:",i),!!i){u(!0);try{R.post(o("settings.updateMinWithdrawal"),{min_withdrawal:i},{onSuccess:()=>{f(i),n(!1),console.log("Minimum withdrawal updated successfully.")},onError:s=>{console.error("Error updating minimum withdrawal:",s)},onFinish:()=>{u(!1)}})}catch(s){console.error("Error:",s),u(!1)}}},y=s=>s>=1e12?"$"+(s/1e12).toFixed(2)+"T":s>=1e9?"$"+(s/1e9).toFixed(2)+"B":s>=1e6?"$"+(s/1e6).toFixed(2)+"M":s>=1e3?"$"+(s/1e3).toFixed(2)+"K":"$"+s.toFixed(2),A=s=>s>=75?"text-green-400":s>=55?"text-yellow-400":s>=45?"text-orange-400":s>=25?"text-red-400":"text-red-500",v=s=>s>=70?"text-red-400":s>=50?"text-green-400":s>=30?"text-orange-400":"text-blue-400";return e.jsx(D,{title:"Dashboard - CryptoAI",children:e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-white",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",F?.user?.name||"User"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 mb-8 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total Balance"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",Number(x.total_balance||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-gradient-to-r from-cyan-500 to-blue-600",children:e.jsx(E,{className:"w-6 h-6 text-white"})})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[x.total_balance_change>=0?e.jsx(b,{className:"w-4 h-4 mr-1 text-green-400"}):e.jsx(w,{className:"w-4 h-4 mr-1 text-red-400"}),e.jsxs("span",{className:`text-sm ${x.total_balance_change>=0?"text-green-400":"text-red-400"}`,children:[Number(x.total_balance_change||0).toFixed(1),"% by profit"]})]})]}),e.jsxs(l,{children:[e.jsxs("div",{className:"md:flex items-center justify-between hidden",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Available Balance"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",Number(x.available_balance||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-gradient-to-r from-orange-500 to-red-600",children:e.jsx(G,{className:"w-6 h-6 text-white"})})]}),e.jsx("div",{className:"flex items-center mt-2",children:e.jsx("span",{className:"text-sm text-gray-400",children:"Ready to invest"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3 lg:grid-rows-1",children:[e.jsxs("div",{className:"lg:col-start-1 lg:col-end-3",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Market Overview"}),e.jsx(z,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-gray-700/30",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Market Cap"}),e.jsx("p",{className:"text-lg font-bold text-cyan-400",children:y(t.globalMetrics?.total_market_cap||0)}),e.jsxs("div",{className:"flex items-center mt-1",children:[t.globalMetrics?.market_cap_change_24h>=0?e.jsx(p,{className:"w-3 h-3 mr-1 text-green-400"}):e.jsx(M,{className:"w-3 h-3 mr-1 text-red-400"}),e.jsxs("span",{className:`text-xs ${t.globalMetrics?.market_cap_change_24h>=0?"text-green-400":"text-red-400"}`,children:[Math.abs(t.globalMetrics?.market_cap_change_24h||0).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-700/30",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Fear & Greed"}),e.jsx("p",{className:`text-lg font-bold ${A(t.fearGreedIndex?.value||50)}`,children:t.fearGreedIndex?.value||50}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:t.fearGreedIndex?.classification||"Neutral"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-700/30",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Avg RSI"}),e.jsx("p",{className:`text-lg font-bold ${v(t.averageRSI||50)}`,children:(t.averageRSI||50).toFixed(1)}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:t.averageRSI>=70?"Overbought":t.averageRSI>=50?"Bullish":t.averageRSI>=30?"Bearish":"Oversold"})]})]})]})}),e.jsx("div",{children:e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Top Cryptocurrencies"}),e.jsx(r,{variant:"ghost",size:"sm",children:"View All"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"py-3 font-medium text-left text-gray-400",children:"#"}),e.jsx("th",{className:"py-3 font-medium text-left text-gray-400",children:"Name"}),e.jsx("th",{className:"py-3 font-medium text-left text-gray-400",children:"Price"}),e.jsx("th",{className:"py-3 font-medium text-left text-gray-400",children:"24h %"}),e.jsx("th",{className:"py-3 font-medium text-left text-gray-400",children:"Market Cap"}),e.jsx("th",{className:"py-3 font-medium text-left text-gray-400",children:"RSI"})]})}),e.jsx("tbody",{children:t.cryptocurrencies&&t.cryptocurrencies.length>0?t.cryptocurrencies.map((s,c)=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-700/30",children:[e.jsx("td",{className:"py-4 text-gray-400",children:s.market_cap_rank||c+1}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:s.logo,alt:s.name,className:"w-8 h-8 rounded-full",onError:a=>{a.target.src=`https://via.placeholder.com/32/374151/9CA3AF?text=${s.symbol}`}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.symbol})]})]})}),e.jsxs("td",{className:"py-4 text-white font-semibold",children:["$",s.price?.toFixed(s.price>1?2:6)||"0.00"]}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center",children:[s.percent_change_24h>=0?e.jsx(p,{className:"w-4 h-4 mr-1 text-green-400"}):e.jsx(M,{className:"w-4 h-4 mr-1 text-red-400"}),e.jsxs("span",{className:`text-sm font-medium ${s.percent_change_24h>=0?"text-green-400":"text-red-400"}`,children:[s.percent_change_24h?.toFixed(2)||"0.00","%"]})]})}),e.jsx("td",{className:"py-4 text-gray-300",children:y(s.market_cap||0)}),e.jsx("td",{className:"py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${v(s.rsi)} bg-gray-700`,children:s.rsi?.toFixed(1)||"50.0"})})]},s.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",className:"py-8 text-center text-gray-400",children:[e.jsx(O,{className:"w-12 h-12 mx-auto mb-4 text-gray-600"}),e.jsx("p",{children:"No market data available"})]})})})]})})]})})]}),e.jsxs("div",{children:[e.jsxs(l,{children:[e.jsx("h2",{className:"mb-6 text-xl font-bold text-white",children:"Quick Actions"}),e.jsxs("div",{className:"flex flex-col space-y-3 gap-y-1",children:[e.jsx(N,{href:o("payments.index"),children:e.jsxs(r,{className:"justify-start w-full",variant:"outline",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Deposit Funds"]})}),e.jsx(N,{href:o("payments.index"),children:e.jsxs(r,{className:"justify-start w-full",variant:"outline",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Withdraw Funds"]})}),e.jsx(N,{href:o("assets.index"),children:e.jsxs(r,{className:"justify-start w-full",variant:"outline",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"View Portfolio"]})})]})]}),e.jsxs(l,{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Notifications"}),e.jsx(B,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:g&&g.length>0?g.map((s,c)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 mt-2 bg-green-400 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500",children:s.time})]})]},c)):e.jsx("p",{className:"text-gray-500 text-sm",children:"No notifications"})})]}),e.jsxs(l,{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Recent Activity"}),e.jsx(r,{variant:"ghost",size:"sm",children:"View All"})]}),e.jsx("div",{className:"space-y-3",children:j&&j.length>0?j.slice(0,5).map((s,c)=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${s.status_badge==="deposit"?"bg-blue-500/20":s.status_badge==="withdrawal"?"bg-orange-500/20":"bg-green-500/20"}`,children:[s.status_badge==="deposit"&&e.jsx(w,{className:"w-3 h-3 text-blue-400"}),s.status_badge==="withdrawal"&&e.jsx(b,{className:"w-3 h-3 text-orange-400"}),s.status_badge==="trade"&&e.jsx(p,{className:"w-3 h-3 text-green-400"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white capitalize",children:s.status_badge}),e.jsx("p",{className:"text-xs text-gray-400",children:s.date})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-white font-medium",children:s.amount}),e.jsx("p",{className:"text-xs text-gray-400",children:s.status})]})]},c)):e.jsx("p",{className:"text-gray-500 text-sm",children:"No recent transactions"})})]})]})]}),S&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Set Minimum Withdrawal"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-white transition-colors",disabled:d,children:e.jsx(L,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-300 mb-6",children:"Please select your minimum withdrawal amount to proceed with transactions."}),e.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:I.map(s=>e.jsxs("button",{onClick:()=>C(s.value),className:`p-4 rounded-lg border-2 transition-all duration-200 ${i===s.value?"border-cyan-500 bg-cyan-500/10 text-cyan-400":"border-gray-600 bg-gray-700/50 text-gray-300 hover:border-gray-500"}`,disabled:d,children:[e.jsx("div",{className:"text-lg font-semibold",children:s.label}),e.jsx("div",{className:"text-sm opacity-75",children:"Minimum"})]},s.value))}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(r,{onClick:()=>n(!1),variant:"outline",className:"flex-1",disabled:d,children:"Cancel"}),e.jsx(r,{onClick:W,className:"flex-1",disabled:!i||d,children:d?"Updating...":"Set Minimum"})]})]})]})})]})})})};export{ae as default};
